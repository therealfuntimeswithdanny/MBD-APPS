<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBD Apps | Danny Docs | Text Edit Plus</title>
    <script src="https://kit.fontawesome.com/0ca27f8db1.js" crossorigin="anonymous"></script>

    <style>
        body { display: flex; flex-direction: column; height: 100vh; margin: 0; }
        #toolbar { padding: 10px; background-color: #f0f0f0; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; }
        #leftSide { display: flex; }
        #rightSide { display: flex; }
        #editor { flex-grow: 1; padding: 10px; border: none; outline: none; overflow: auto; }
        #wordCount { padding: 10px; }
        .button { margin-left: 5px; padding: 5px; cursor: pointer; border: 1px solid #ccc; border-radius: 3px; background: #fff; }
        .button:hover { background: #eaeaea; }
        .dark-mode { background-color: #333; color: #ddd; }
        a { color: black; }
        .dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: #f0f0f0;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

.dropdown:hover .dropdown-content {
    display: block;
}

.dropdown-content .button {
    color: black;
    padding: 5px 10px;
    text-decoration: none;
    display: block;
    text-align: left;
}

.dropdown-content .button:hover {
    background-color: #ddd;
}
        #bottomToolbar { padding: 10px; background-color: #f0f0f0; border-top: 1px solid #ddd; display: flex; justify-content: space-between; position: fixed; bottom: 0; width: 100%; box-shadow: 0 -2px 5px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div id="toolbar">
        <div id="leftSide">
            <p> MBD Text Editor Plus | Version 2.0 [Stable]</p>
            <p> | </p>
            <p><a href="https://apps.madebydanny.uk">MBD Apps Home</a></p>
            <p> | </p>
            <p><a href="https://apps.madebydanny.uk/code-edit/index.html">Switch to Code Editor</a></p>
            <p> | </p>
            <p><a><i class="fa-brands fa-reddit"></i></a> <a><i class="fa-brands fa-github"></i></a> <a><i class="fa-brands fa-youtube"></i></a> <a><i class="fa-brands fa-instagram"></i></a> <a><i class="fa-brands fa-twitch"></i></a></p>
        </div>
        <div id="rightSide">            <button class="button" onclick="execCmd('bold')"><b>Bold</b></button>
            <button class="button" onclick="execCmd('italic')"><i>Italic</i></button>
            <button class="button" onclick="highlightText()">Highlight</button>
            <button class="button" onclick="execCmd('underline')"><u>Underline</u></button>
            <button class="button" onclick="execCmd('strikethrough')"><s><i class="fa-solid fa-strikethrough"></i></s></button>
            <button class="button" onclick="execCmd('justifyLeft')"><i class="fa-solid fa-align-left"></i></button>
            <button class="button" onclick="execCmd('justifyCenter')"><i class="fa-solid fa-align-center"></i></button>
            <button class="button" onclick="execCmd('justifyRight')"><i class="fa-solid fa-align-right"></i></button>
            <button class="button" onclick="document.getElementById('imageInput').click()">Image</button>
            <input type="file" id="imageInput" style="display: none;" onchange="insertImage(event)">
            <button class="button" onclick="insertTable()">Table</button>
            <div class="dropdown">
                <button class="button">Table Options</button>
                <div class="dropdown-content">
                    <button class="button" onclick="addRow()">Add Row</button>
                    <button class="button" onclick="deleteRow()">Delete Row</button>
                    <button class="button" onclick="addColumn()">Add Column</button>
                    <button class="button" onclick="deleteColumn()">Delete Column</button>
                </div>
            </div>
            
            <button class="button" onclick="createLink()">Link</button>
            <button class="button" onclick="execCmd('insertOrderedList')"><i class="fa-solid fa-list-ol"></i></button>
            <button class="button" onclick="changeTextColor()">Text Color</button>
            <button class="button" onclick="changeTextSize()">Font Size</button>
            <button class="button" onclick="changeFontFamily()">Font Family</button>
            <button class="button" onclick="execCmd('undo')"><i class="fa-solid fa-arrow-left"></i></button>
            <button class="button" onclick="execCmd('redo')"><i class="fa-solid fa-arrow-right"></i></button>
            <button class="button" onclick="toggleDarkMode()">Dark Mode</button>
            <button class="button" onclick="clearText()">Clear</button>
            <button class="button" onclick="saveHTML()">Save</button>
            <button class="button" onclick="printDocument()"><i class="fa-solid fa-print"></i></button>
            <button class="button" onclick="document.getElementById('htmlInput').click()">Upload</button>
            <input type="file" id="htmlInput" style="display: none;" accept=".html" onchange="uploadHTML(event)">
        </div>
    </div>
    <div id="editor" contenteditable="true" oninput="updateWordCount()"></div>
    <div id="bottomToolbar"> 
        <div id="wordCount">Word Count: 0</div> 
        <p>Danny Docs | MBD DEV | Backed By Cloudflare</p>
        <p><a href="https://github.com/therealfuntimeswithdanny/MBD-APPS">Code is open source | View On GitHub                   |</a></p>
    </div>

    <script>
        function changeTextSize() {
    const size = prompt("Enter the text size (1-7)");
    if (size) {
        document.execCommand('fontSize', false, size);
    }
}
        function getSelectedTable() {
    const selection = window.getSelection();
    if (selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        let node = range.startContainer;
        while (node && node.nodeName !== 'TABLE') {
            node = node.parentNode;
        }
        return node;
    }
    return null;
}

function addRow() {
    const table = getSelectedTable();
    if (table) {
        const newRow = table.insertRow();
        for (let i = 0; i < table.rows[0].cells.length; i++) {
            newRow.insertCell().innerHTML = '&nbsp;';
        }
    }
}

function deleteRow() {
    const table = getSelectedTable();
    if (table && table.rows.length > 0) {
        table.deleteRow(-1);
    }
}

function addColumn() {
    const table = getSelectedTable();
    if (table) {
        for (let i = 0; i < table.rows.length; i++) {
            table.rows[i].insertCell().innerHTML = '&nbsp;';
        }
    }
}

function deleteColumn() {
    const table = getSelectedTable();
    if (table && table.rows[0].cells.length > 0) {
        for (let i = 0; i < table.rows.length; i++) {
            table.rows[i].deleteCell(-1);
        }
    }
}

        function printDocument() {
    const content = document.getElementById('editor').innerHTML;
    const printWindow = window.open('', '', 'height=600,width=800');
    printWindow.document.write('<html><head><title>Print Document</title>');
    printWindow.document.write('</head><body >');
    printWindow.document.write(content);
    printWindow.document.write('</body></html>');
    printWindow.document.close();
    printWindow.print();
}

        function autoSave() {
    const content = document.getElementById('editor').innerHTML;
    localStorage.setItem('autosaveContent', content);
}

function loadAutoSavedContent() {
    const savedContent = localStorage.getItem('autosaveContent');
    if (savedContent) {
        document.getElementById('editor').innerHTML = savedContent;
    }
}

setInterval(autoSave, 30000); // Autosave every 30 seconds
window.onload = loadAutoSavedContent;

        function changeTextColor() {
    const color = prompt("Enter the text color (e.g., red, blue, #123456)");
    if (color) {
        document.execCommand('foreColor', false, color);
    }
}
function changeFontFamily() {
    const font = prompt("Enter the font family (e.g., Arial, Courier, Times New Roman)");
    if (font) {
        document.execCommand('fontName', false, font);
    }
}

                function createLink() {
            const url = prompt("Right Click Link to open");
            if (url) {
                document.execCommand('createLink', false, url);
            }
        }
                function highlightText() {
            const color = prompt("Enter the highlight color (e.g., yellow, pink)");
            if (color) {
                document.execCommand('hiliteColor', false, color);
            }
        }
        function clearText() { const editor = document.getElementById('editor'); editor.innerHTML = ''; updateWordCount();}
        function execCmd(command) {
            document.execCommand(command, false, null);
        }

        function insertImage(event) {
            const file = event.target.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                document.execCommand('insertHTML', false, img.outerHTML);
            };
            reader.readAsDataURL(file);
        }

        function insertTable() {
            const rows = prompt("Enter the number of rows", 2);
            const cols = prompt("Enter the number of columns", 2);
            if (rows && cols) {
                let table = '<table border="1">';
                for (let i = 0; i < rows; i++) {
                    table += '<tr>';
                    for (let j = 0; j < cols; j++) {
                        table += '<td>&nbsp;</td>';
                    }
                    table += '</tr>';
                }
                table += '</table>';
                document.execCommand('insertHTML', false, table);
            }
        }

        function updateWordCount() {
            const text = document.getElementById('editor').innerText || '';
            const wordCount = text.trim().split(/\s+/).filter(Boolean).length;
            document.getElementById('wordCount').innerText = `Word Count: ${wordCount}`;
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const editor = document.getElementById('editor');
            editor.classList.toggle('dark-mode');
        }

        function saveHTML() {
            const editorContent = document.getElementById('editor').innerHTML;
            const blob = new Blob([editorContent], { type: "text/html;charset=utf-8" });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = "document.html";
            link.click();
        }

        function uploadHTML(event) {
            const file = event.target.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('editor').innerHTML = e.target.result;
                updateWordCount();
            };
            reader.readAsText(file);
        }
    </script>
</body>
</html>
